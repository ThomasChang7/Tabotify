{"version":3,"sources":["../../src/server/models/Model.js"],"names":["objection","require","_","knex","MyQueryBuilder","Model","$beforeInsert","created_at","Date","toISOString","$beforeValidate","jsonSchema","json","opt","$beforeUpdate","updated_at","$formatDatabaseJson","mapKeys","v","k","snakeCase","$parseDatabaseJson","camelCase","module","exports"],"mappings":";;;;;;;;AAAA,IAAMA,YAAYC,QAAQ,WAAR,CAAlB;AACA,IAAMC,IAAID,QAAQ,QAAR,CAAV;AACA,IAAME,OAAOF,QAAQ,cAAR,CAAb;AACA,IAAMG,iBAAiBH,QAAQ,gBAAR,CAAvB;;AAEAD,UAAUK,KAAV,CAAgBF,IAAhB,CAAqBA,IAArB;;IAEME,K;;;;;;;;;kBAIJC,a,4BAAgB;AACd,SAAKC,UAAL,GAAkB,IAAIC,IAAJ,GAAWC,WAAX,EAAlB;AACD,G;;kBAEDC,e,4BAAgBC,U,EAAYC,I,EAAMC,G,EAAK;AACrC,WAAOF,UAAP;AACD,G;;kBAEDG,a,4BAAgB;AACd,SAAKC,UAAL,GAAkB,IAAIP,IAAJ,EAAlB;AACD,G;;kBAEDQ,mB,gCAAoBJ,I,EAAM;AACxB,WAAOV,EAAEe,OAAF,CAAUL,IAAV,EAAgB,UAACM,CAAD,EAAIC,CAAJ;AAAA,aAAUjB,EAAEkB,SAAF,CAAYD,CAAZ,CAAV;AAAA,KAAhB,CAAP;AACD,G;;kBAEDE,kB,+BAAmBT,I,EAAM;AACvB,WAAOV,EAAEe,OAAF,CAAUL,IAAV,EAAgB,UAACM,CAAD,EAAIC,CAAJ;AAAA,aAAUjB,EAAEoB,SAAF,CAAYH,CAAZ,CAAV;AAAA,KAAhB,CAAP;AACD,G;;;;wBArByB;AACxB,aAAOf,cAAP;AACD;;;;EAHiBJ,UAAUK,K;;AAwB9BkB,OAAOC,OAAP,GAAiBnB,KAAjB","file":"Model.js","sourcesContent":["const objection = require('objection');\nconst _ = require('lodash');\nconst knex = require('../db/config');\nconst MyQueryBuilder = require('./QueryBuilder');\n\nobjection.Model.knex(knex);\n\nclass Model extends objection.Model {\n  static get QueryBuilder() {\n    return MyQueryBuilder;\n  }\n  $beforeInsert() {\n    this.created_at = new Date().toISOString();\n  }\n\n  $beforeValidate(jsonSchema, json, opt) {\n    return jsonSchema;\n  }\n\n  $beforeUpdate() {\n    this.updated_at = new Date();\n  }\n\n  $formatDatabaseJson(json) {\n    return _.mapKeys(json, (v, k) => _.snakeCase(k));\n  }\n\n  $parseDatabaseJson(json) {\n    return _.mapKeys(json, (v, k) => _.camelCase(k));\n  }\n}\nmodule.exports = Model;\n"]}