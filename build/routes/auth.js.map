{"version":3,"sources":["../../src/server/routes/auth.js"],"names":["Router","require","passport","router","get","ctx","redirect","authenticate","scope","showDialog","failureRedirect","successRedirect","logout","module","exports"],"mappings":";;;;AAAA,IAAMA,SAASC,QAAQ,YAAR,CAAf;AACA,IAAMC,WAAWD,QAAQ,cAAR,CAAjB;;AAEA,IAAME,SAAS,IAAIH,MAAJ,EAAf;;AAEAG,OAAOC,GAAP,CAAW,QAAX;AAAA,qEAAqB,iBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AACnBA,gBAAIC,QAAJ,CAAa,eAAb;;AADmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAArB;;AAAA;AAAA;AAAA;AAAA;;AAIAH,OAAOC,GAAP,CACE,eADF,EAEEF,SAASK,YAAT,CAAsB,SAAtB,EAAiC;AAC/BC,SAAO,0CADwB;AAE/BC,cAAY;AAFmB,CAAjC,CAFF;;AAQAN,OAAOC,GAAP,CACE,WADF,EAEEF,SAASK,YAAT,CAAsB,SAAtB,EAAiC;AAC/BG,mBAAiB,QADc;AAE/BC,mBAAiB;AAFc,CAAjC,CAFF;AAAA,sEAME,kBAAON,GAAP;AAAA;AAAA;AAAA;AAAA;AACEA,gBAAIC,QAAJ,CAAa,GAAb;;AADF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GANF;;AAAA;AAAA;AAAA;AAAA;;AAWAH,OAAOC,GAAP,CAAW,SAAX;AAAA,sEAAsB,kBAAOC,GAAP;AAAA;AAAA;AAAA;AAAA;AACpBA,gBAAIO,MAAJ;AACAP,gBAAIC,QAAJ,CAAa,GAAb;;AAFoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAtB;;AAAA;AAAA;AAAA;AAAA;;AAKAO,OAAOC,OAAP,GAAiBX,MAAjB","file":"auth.js","sourcesContent":["const Router = require('koa-router');\nconst passport = require('koa-passport');\n\nconst router = new Router();\n\nrouter.get('/login', async (ctx) => {\n  ctx.redirect('/auth/spotify');\n});\n\nrouter.get(\n  '/auth/spotify',\n  passport.authenticate('spotify', {\n    scope: 'user-read-email  playlist-modify-private',\n    showDialog: true,\n  }),\n);\n\nrouter.get(\n  '/callback',\n  passport.authenticate('spotify', {\n    failureRedirect: '/login',\n    successRedirect: '/',\n  }),\n  async (ctx) => {\n    ctx.redirect('/');\n  },\n);\n\nrouter.get('/logout', async (ctx) => {\n  ctx.logout();\n  ctx.redirect('/');\n});\n\nmodule.exports = router;\n"]}